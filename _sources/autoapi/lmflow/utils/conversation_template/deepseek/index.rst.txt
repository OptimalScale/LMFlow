lmflow.utils.conversation_template.deepseek
===========================================

.. py:module:: lmflow.utils.conversation_template.deepseek


Attributes
----------

.. autoapisummary::

   lmflow.utils.conversation_template.deepseek.DEEPSEEK_V2_TEMPLATE
   lmflow.utils.conversation_template.deepseek.DEEPSEEK_V3_TEMPLATE
   lmflow.utils.conversation_template.deepseek.DEEPSEEK_R1_TEMPLATE
   lmflow.utils.conversation_template.deepseek.DEEPSEEK_R1_DISTILL_TEMPLATE


Module Contents
---------------

.. py:data:: DEEPSEEK_V2_TEMPLATE

.. py:data:: DEEPSEEK_V3_TEMPLATE
   :value: Multiline-String

   .. raw:: html

      <details><summary>Show Value</summary>

   .. code-block:: python

      """{% if not add_generation_prompt is defined %}{% set add_generation_prompt = false %}{% endif %}{% set ns = namespace(is_first=false, is_tool=false, is_output_first=true, system_prompt='', is_first_sp=true) %}{%- for message in messages %}{%- if message['role'] == 'system' %}{%- if ns.is_first_sp %}{% set ns.system_prompt = ns.system_prompt + message['content'] %}{% set ns.is_first_sp = false %}{%- else %}{% set ns.system_prompt = ns.system_prompt + '
      
      ' + message['content'] %}{%- endif %}{%- endif %}{%- endfor %}{{bos_token}}{{ns.system_prompt}}{%- for message in messages %}{%- if message['role'] == 'user' %}{%- set ns.is_tool = false -%}{{'<｜User｜>' + message['content']}}{%- endif %}{%- if message['role'] == 'assistant' and message['content'] is none %}{%- set ns.is_tool = false -%}{%- for tool in message['tool_calls']%}{%- if not ns.is_first %}{{'<｜Assistant｜>'}}{% generation %}{{'<｜tool▁calls▁begin｜><｜tool▁call▁begin｜>' + tool['type'] + '<｜tool▁sep｜>' + tool['function']['name'] + '
      ' + '```json' + '
      ' + tool['function']['arguments'] + '
      ' + '```' + '<｜tool▁call▁end｜>'}}{% endgeneration %}{%- set ns.is_first = true -%}{%- else %}{% generation %}{{'
      ' + '<｜tool▁call▁begin｜>' + tool['type'] + '<｜tool▁sep｜>' + tool['function']['name'] + '
      ' + '```json' + '
      ' + tool['function']['arguments'] + '
      ' + '```' + '<｜tool▁call▁end｜>'}}{{'<｜tool▁calls▁end｜><｜end▁of▁sentence｜>'}}{% endgeneration %}{%- endif %}{%- endfor %}{%- endif %}{%- if message['role'] == 'assistant' and message['content'] is not none %}{%- if ns.is_tool %}{{'<｜tool▁outputs▁end｜>'}}{% generation %}{{ message['content'] + '<｜end▁of▁sentence｜>'}}{%- set ns.is_tool = false -%}{% endgeneration %}{%- else %}{{'<｜Assistant｜>'}}{% generation %}{{ message['content'] + '<｜end▁of▁sentence｜>'}}{% endgeneration %}{%- endif %}{%- endif %}{%- if message['role'] == 'tool' %}{%- set ns.is_tool = true -%}{%- if ns.is_output_first %}{{'<｜tool▁outputs▁begin｜><｜tool▁output▁begin｜>' + message['content'] + '<｜tool▁output▁end｜>'}}{%- set ns.is_output_first = false %}{%- else %}{{'
      <｜tool▁output▁begin｜>' + message['content'] + '<｜tool▁output▁end｜>'}}{%- endif %}{%- endif %}{%- endfor -%}{% if ns.is_tool %}{{'<｜tool▁outputs▁end｜>'}}{% endif %}{% if add_generation_prompt and not ns.is_tool %}{{'<｜Assistant｜>'}}{% endif %}"""

   .. raw:: html

      </details>



.. py:data:: DEEPSEEK_R1_TEMPLATE
   :value: "{% if not add_generation_prompt is defined %}{% set add_generation_prompt = false %}{% endif...


.. py:data:: DEEPSEEK_R1_DISTILL_TEMPLATE
   :value: "{% if not add_generation_prompt is defined %}{% set add_generation_prompt = false %}{% endif...


